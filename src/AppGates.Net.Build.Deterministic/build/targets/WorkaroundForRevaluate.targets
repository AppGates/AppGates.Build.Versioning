<Project>

 
  <!--hack to fix not working RestoreForceEvaluate property-->
  <PropertyGroup >
    <OriginalNugetLockFilePath>$(NuGetLockFilePath)</OriginalNugetLockFilePath>
    <NuGetLockFilePathTemp>$(BaseIntermediateOutputPath)packages.lock.temp</NuGetLockFilePathTemp>
    <NuGetLockFilePath>$(NuGetLockFilePathTemp)</NuGetLockFilePath>
  </PropertyGroup>
  <ItemGroup>
    <NugetLockAsset Include="$(OriginalNugetLockFilePath)"/>
    <NugetLockAsset Include="$(NuGetLockFilePathTemp)"/>
  </ItemGroup>

  <Target Name="DeleteLockFileBeforeRestore" BeforeTargets="_GetRestoreProjectStyle">
    <Delete Files="$(OriginalNugetLockFilePath)"/>
  </Target>

  <Target Name="CopyTempLockFile" AfterTargets="_GetRestoreProjectStyle" >
    <Move
      Condition="'$(RestoreForceEvaluate)' == 'true' AND Exists('$(NuGetLockFilePathTemp)')"
      SourceFiles="$(NuGetLockFilePathTemp)"
          DestinationFiles="$(OriginalNugetLockFilePath)"
          OverwriteReadOnlyFiles="true"/>
  </Target>
  <!--<Target Name="RestoreBeforeClean" 
          Condition="'$(TargetFrameworks)' == ''" 
          BeforeTargets="Clean">
    <CallTarget Targets="Restore"/>
  </Target>-->

  


  

  
</Project>